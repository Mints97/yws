#include "types.h"
#include "defs.h"
#include "vga.h"

#define CURSOR_WIDTH 12
#define CURSOR_HEIGHT 19

static const unsigned char cursor[CURSOR_WIDTH * CURSOR_HEIGHT] = {
  0x00, 0x00, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7,
  0x00, 0xd7, 0x00, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7,
  0x00, 0xd7, 0xd7, 0x00, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7,
  0x00, 0xd7, 0xd7, 0xd7, 0x00, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7,
  0x00, 0xd7, 0xd7, 0xd7, 0xd7, 0x00, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7,
  0x00, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0x00, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7,
  0x00, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0x00, 0xd7, 0xd7, 0xd7, 0xd7,
  0x00, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0x00, 0xd7, 0xd7, 0xd7,
  0x00, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0x00, 0xd7, 0xd7,
  0x00, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0x00, 0xd7,
  0x00, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0x00,
  0x00, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0xd7, 0xd7, 0xd7, 0x00, 0xd7, 0xd7, 0x00, 0xd7, 0xd7, 0xd7, 0xd7,
  0x00, 0xd7, 0xd7, 0x00, 0xd7, 0x00, 0xd7, 0xd7, 0x00, 0xd7, 0xd7, 0xd7,
  0x00, 0xd7, 0x00, 0xd7, 0xd7, 0x00, 0xd7, 0xd7, 0x00, 0xd7, 0xd7, 0xd7,
  0x00, 0x00, 0xd7, 0xd7, 0xd7, 0xd7, 0x00, 0xd7, 0xd7, 0x00, 0xd7, 0xd7,
  0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0x00, 0xd7, 0xd7, 0x00, 0xd7, 0xd7,
  0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0xd7, 0x00, 0x00, 0xd7, 0xd7, 0xd7,
};

static const unsigned char cursor_mask[CURSOR_WIDTH * CURSOR_HEIGHT] = {
  1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0,
  1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0,
  1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0,
  1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0,
  1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,
  1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0,
  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0,
  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
  1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,
  1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0,
  1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0,
  1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0,
  0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0,
};

void
move_cursor(int oldx, int oldy, int dx, int dy)
{
  redraw(oldx, oldy, CURSOR_WIDTH, CURSOR_HEIGHT);
  draw_masked(oldx + dx, oldy + dy, cursor, cursor_mask, CURSOR_WIDTH, CURSOR_HEIGHT, 1);
}
